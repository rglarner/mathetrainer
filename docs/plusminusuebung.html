<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlusMinusÜbung</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>
<body class="w3-container">
    <header class="w3-bar w3-blue">
        <div class="w3-bar-item">
            <button class="menu-toggle" aria-controls="mainNav" aria-expanded="false" title="Menü" type="button">☰</button>
        </div>
        <nav id="mainNav" class="nav-links w3-bar-item w3-right" role="navigation" aria-label="Hauptnavigation">
            <a href="index.html" class="w3-bar-item w3-button">Startseite</a>
            <a href="plusminusuebung.html" class="w3-bar-item w3-button">PlusMinus</a>
            <a href="reihenuebung.html" class="w3-bar-item w3-button">Reihen</a>
            <a href="links.html" class="w3-bar-item w3-button">Links</a>
        </nav>
    </header>

    <!-- Fester Timer oben rechts -->
    <div id="fixedTimer" class="w3-card w3-padding" style="display:none;" aria-hidden="true" aria-live="polite" role="status">
        <span id="fixedTimerText">00:00</span>
    </div>

    <main class="w3-margin-top">
        <h1>PlusMinusÜbung</h1>
        <form id="plusminusForm" class="w3-container">
            <label>
                <input type="radio" name="operation" value="add" checked> Addition - Plus (+)
                <button type="button" class="help" data-help="Wähle Addition, wenn zwei Zahlen addiert werden sollen.">?</button>
            </label>
            <label>
                <input type="radio" name="operation" value="sub"> Subtraktion - Minus (-)
                <button type="button" class="help" data-help="Wähle Subtraktion, wenn von einer Zahl eine andere abgezogen werden soll.">?</button>
            </label>
            <!-- Zeilenumbruch entfernt, vertikaler Abstand wird über CSS gesteuert -->
            <label>
                <input type="checkbox" id="uebertrag"> Mit Übertrag
                <button type="button" class="help" data-help="Mit Übertrag dürfen die Schülerinnen bei der Addition über ganze Zehner springen, z. B. 8 + 8 = 16. Ohne Übertrag bleibt die Zehnerstelle gleich.">?</button>
            </label>
            <br>
            <label>Zahlen (1-12):</label>
            <div id="zahlContainer" class="w3-margin-bottom reihen-grid">
                <button type="button" class="help" data-help="Wähle hier die Ziffern, aus denen der erste Summand bzw. Subtrahend gezogen wird (z. B. 2, 3, 7).">?</button>
                <script>
                    const zc = document.currentScript.parentElement;
                    let html = '';
                    for (let i = 1; i <= 12; i++) {
                        html += `<label class="reihe-box"><input type="checkbox" name="zahlOption" value="${i}"><span>${i}</span></label>`;
                    }
                    html += '<div class="w3-tiny w3-text-grey" style="grid-column: 1 / -1;">Mehrere Zahlen möglich</div>';
                    zc.innerHTML = html;
                </script>
            </div>
            <label for="zahlenraum">Zahlenraum (maximale Summe/Minuend, 10–100):
                <button type="button" class="help" data-help="Die Zahl bestimmt die grösste erlaubte Summe (bei Addition) bzw. den grössten Minuenden (bei Subtraktion).">?</button>
            </label>
            <input type="number" id="zahlenraum" min="10" max="100" class="w3-input" value="20">
            <label for="questionCount">Anzahl der Fragen (1-100):</label>
            <input type="number" id="questionCount" min="1" max="100" class="w3-input" value="20">
            <label for="timeLimit">Zeitfenster (maximal 20 Minuten):</label>
            <div class="w3-row">
                <div class="w3-col s6">
                    <select id="timeMinutes" class="w3-select">
                        <option value="" disabled>Minuten</option>
                        <script>
                            for (let i = 0; i <= 20; i++) {
                                const sel = (i === 2) ? ' selected' : '';
                                document.write(`<option value="${i}"${sel}>${i} Min</option>`);
                            }
                        </script>
                    </select>
                </div>
                <div class="w3-col s6">
                    <select id="timeSeconds" class="w3-select">
                        <option value="" disabled>Sekunden</option>
                        <script>
                            for (let s = 0; s < 60; s += 5) {
                                const sel = (s === 0) ? ' selected' : '';
                                document.write(`<option value="${s}"${sel}>${s} Sek</option>`);
                            }
                        </script>
                    </select>
                </div>
            </div>
            <button type="button" id="startButton" class="w3-button w3-green" disabled>Start</button>
            <p id="errorMessage" class="w3-text-red"></p>
        </form>

        <div id="exerciseArea" class="w3-margin-top" style="display:none;">
            <h2>Übung</h2>
            <div id="questions"></div>
            <p>Verbleibende Zeit: <span id="timer">00:00</span></p>
            <button id="submitAnswers" class="w3-button w3-blue">Antworten einreichen</button>
        </div>

        <div id="resultArea" class="w3-margin-top" style="display:none;">
            <h2>Ergebnisse</h2>
            <p id="correctAnswers"></p>
            <button id="restartButton" class="w3-button w3-orange">Neu starten</button>
        </div>
    </main>
    <script src="js/menu.js"></script>
    <script src="js/help.js"></script>
    <script src="js/plusminusuebung.js"></script>
</body>
</html>